{"version":3,"sources":["index.js"],"names":["HexbinPlot","axisX","axisY","data","setSelectedGames","axis","setSelectedColor","margin","width","height","xScale","d3","domain","item","range","nice","yScale","hexbin","d3hexbin","x","Math","max","y","radius","extent","bins","colorAccessor","total","forEach","value","length","colorScale","viewBox","id","clipPath","transform","map","bin","i","key","d","hexagon","fill","onClick","SearchGame","selectData","selectArray","teamArray","Team_H","listTeam","team","className","style","class","color","Goal_H","Goal_A","Team_A","TotalPage","useState","originalData","setGameData","data2","setTeamData","selectedGames","selectedTeam","setSelectedTeam","selectedAxis","setSelectedAxis","selectedColor","filter","teamOptions","Team","unshift","axisOptions","value2","colorOptions","value3","useEffect","fetch","then","response","json","game","View","response2","Total","size","onChange","event","target","render","document","querySelector"],"mappings":"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","file":"static/js/main.c2dac606.chunk.js","sourcesContent":["import \"bulma/css/bulma.css\";\r\nimport \"./index.css\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport * as d3 from \"d3\";\r\nimport * as d3hexbin from \"d3-hexbin\";\r\n\r\nconst HexbinPlot = ({ data, setSelectedGames, axis, setSelectedColor }) => {\r\n  let axisX;\r\n  let axisY;\r\n  if (axis === \"PCA\") {\r\n    axisX = \"PCA1\";\r\n    axisY = \"PCA2\";\r\n  } else {\r\n    axisX = \"tSNE_X\";\r\n    axisY = \"tSNE_Y\";\r\n  }\r\n  const contentWidth = 800;\r\n  const contentHeight = 500;\r\n  const xTop = 0;\r\n  const yTop = 0;\r\n  const margin = {\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0,\r\n  };\r\n  const width = contentWidth + margin.left + margin.right;\r\n  const height = contentHeight + margin.top + margin.bottom;\r\n\r\n  const xScale = d3\r\n    .scaleLinear()\r\n    .domain(d3.extent(data, (item) => item[axisX]))\r\n    .range([0, contentWidth])\r\n    .nice();\r\n  const yScale = d3\r\n    .scaleLinear()\r\n    .domain(d3.extent(data, (item) => item[axisY]))\r\n    .range([contentHeight, 0])\r\n    .nice();\r\n  const hexbin = d3hexbin\r\n    .hexbin()\r\n    .x((item) => xScale(Math.max(item[axisX])))\r\n    .y((item) => yScale(Math.max(item[axisY])))\r\n    .radius(20)\r\n    .extent([\r\n      [0, 0],\r\n      [contentWidth, contentHeight],\r\n    ]);\r\n\r\n  const bins = hexbin(data);\r\n  const colorAccessor = (item) => {\r\n    let total = 0;\r\n    item.forEach((value) => {\r\n      total += value[setSelectedColor];\r\n    });\r\n    return total / item.length;\r\n  };\r\n  const colorScale = d3\r\n    .scaleSequential(d3.interpolateYlGn)\r\n    .domain(d3.extent(bins, colorAccessor));\r\n\r\n  return (\r\n    <svg viewBox={`${xTop} ${yTop} ${width} ${height}`}>\r\n      <clipPath id=\"content-region\">\r\n        <rect x=\"0\" y={yTop} width={contentWidth} height={contentHeight} />\r\n      </clipPath>\r\n      <g>\r\n        <g\r\n          clipPath=\"url(#content-region)\"\r\n          transform={`translate(${margin.left},${margin.top})`}\r\n        >\r\n          {bins.map((bin, i) => {\r\n            function buttonClick() {\r\n              setSelectedGames(bin);\r\n            }\r\n            return (\r\n              <g key={i} transform={`translate(${bin.x},${bin.y})`}>\r\n                <path\r\n                  d={hexbin.hexagon()}\r\n                  fill={colorScale(colorAccessor(bin))}\r\n                  onClick={buttonClick}\r\n                />\r\n              </g>\r\n            );\r\n          })}\r\n        </g>\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst SearchGame = ({ data, setSelectedGames }) => {\r\n  const selectData = setSelectedGames;\r\n\r\n  const selectArray = [];\r\n  const teamArray = [];\r\n\r\n  for (let i = 0; i < selectData.length; i++) {\r\n    //それぞれを配列\r\n    selectArray[i] = selectData[i];\r\n  }\r\n  for (let i = 0; i < selectData.length; i++) {\r\n    teamArray[i] = selectArray[i].Team_H;\r\n  }\r\n\r\n  const listTeam = selectArray.map((team) => (\r\n    <div className=\"box\" style={{ height: \"100%\" }}>\r\n      <nav class=\"level is-mobile\">\r\n        <div className=\"level-item has-text-centered\" key={team}>\r\n          <div>\r\n            <p class=\"heading\">Home</p>\r\n            <p class=\"title\">{team.Team_H} </p>\r\n          </div>\r\n          <div>\r\n            <p class=\"heading\">score</p>\r\n            <p class=\"title\">\r\n              <font color=\"red\">\r\n                &nbsp;{team.Goal_H} ー {team.Goal_A}&nbsp;\r\n              </font>\r\n            </p>\r\n          </div>\r\n          <div>\r\n            <p class=\"heading\">Away</p>\r\n            <p class=\"title\">{team.Team_A}</p>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  ));\r\n\r\n  return <div>{listTeam}</div>;\r\n};\r\n\r\nconst TotalPage = () => {\r\n  const [originalData, setGameData] = useState([]);\r\n  const [data2, setTeamData] = useState([]);\r\n  const [selectedGames, setSelectedGames] = useState([]);\r\n  const [selectedTeam, setSelectedTeam] = useState(\"\");\r\n  const [selectedAxis, setSelectedAxis] = useState(\"\");\r\n  const [selectedColor, setSelectedColor] = useState(\"View\");\r\n\r\n  const data = originalData.filter((item) => {\r\n    return (\r\n      item.Team_H === selectedTeam ||\r\n      item.Team_A === selectedTeam ||\r\n      selectedTeam === \"\"\r\n    );\r\n  });\r\n\r\n  //bulma\r\n  //チーム名のプルダウン\r\n\r\n  function Arraycount(value) {\r\n    return value.Team;\r\n  }\r\n  var Team = [];\r\n  Team = data2.filter(Arraycount);\r\n\r\n  const teamOptions = Team.map((value) => {\r\n    return <option value={value.Team}>{value.Team}</option>;\r\n  });\r\n  teamOptions.unshift(<option value=\"\">ALL</option>);\r\n\r\n  //軸のプルダウン\r\n\r\n  var Axis = [\"t-SNE\", \"PCA\"];\r\n  const axisOptions = Axis.map((value2) => {\r\n    return <option value={value2}>{value2}</option>;\r\n  });\r\n\r\n  //色のプルダウン\r\n\r\n  var Color = [\"View\", \"Mileage\", \"Sprint\", \"Shoot\", \"Goal\"];\r\n  const colorOptions = Color.map((value3) => {\r\n    return <option value={value3}>{value3}</option>;\r\n  });\r\n\r\n  const handleChangeTeam = (event) => {\r\n    setSelectedTeam(event.target.value);\r\n  };\r\n\r\n  const handlechangecolor = (event) => {\r\n    setSelectedColor(event.target.value);\r\n  };\r\n\r\n  const handleChangeAxis = (event) => {\r\n    setSelectedAxis(event.target.value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetch(\"J_Data.json\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        data.game.forEach((item, i) => {\r\n          item.id = i;\r\n        });\r\n        setGameData(data.game.filter((item) => item.View >= 0));\r\n      });\r\n    fetch(\"J_Data.json\")\r\n      .then((response2) => response2.json())\r\n      .then((data) => {\r\n        data.team.forEach((item, i) => {\r\n          item.id = i;\r\n        });\r\n        setTeamData(data.team.filter((item) => item.Total >= 0));\r\n      });\r\n  }, []);\r\n  return (\r\n    <div>\r\n      {/*見出し*/}\r\n      <section className=\"hero is-info\">\r\n        <div className=\"hero-body\">\r\n          <div className=\"container\">\r\n            <h1 className=\"title\">Soccer</h1>\r\n            <h2 className=\"subtitle\">Let's play soccer</h2>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <section className=\"section\">\r\n        <div className=\"columns\">\r\n          <div className=\"column is-one-quarter\">\r\n            {/*プルダウンメニュー 画面3分の1*/}\r\n            <div className=\"box\" style={{ height: \"100%\" }}>\r\n              <b>\r\n                <font size=\"5\">Filter memu</font>\r\n              </b>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Team</label>\r\n                <div className=\"control\">\r\n                  <div className=\"select is-fullwidth\">\r\n                    <select onChange={handleChangeTeam}>{teamOptions}</select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"field\">\r\n                <label className=\"label\">Axis</label>\r\n                <div className=\"control\">\r\n                  <div className=\"select is-fullwidth\">\r\n                    <select onChange={handleChangeAxis}>{axisOptions}</select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"field\">\r\n                <label className=\"label\">Color</label>\r\n                <div className=\"control\">\r\n                  <div className=\"select is-fullwidth\">\r\n                    <select onChange={handlechangecolor}>{colorOptions}</select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/**/}\r\n          </div>\r\n\r\n          <div className=\"column\">\r\n            <div className=\"box\">\r\n              <b>\r\n                <center>Click Hexbin and show game!</center>\r\n              </b>\r\n            </div>\r\n            <HexbinPlot\r\n              data={data}\r\n              setSelectedGames={setSelectedGames}\r\n              axis={selectedAxis}\r\n              setSelectedColor={selectedColor}\r\n            />\r\n          </div>\r\n        </div>\r\n        {/*此処までで上側(検索とhexbin)*/}\r\n        <div className=\"columns\">\r\n          <div className=\"column\">\r\n            <SearchGame data={data} setSelectedGames={selectedGames} />\r\n          </div>\r\n        </div>\r\n      </section>\r\n      {/*検索から表示までを1つのsection*/}\r\n      <footer className=\"footer\">\r\n        <div className=\"content has-text-centered\">\r\n          <p>&copy; 2020 Manaya Sakamoto, Tsubasa Deguchi</p>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\nrender(<TotalPage />, document.querySelector(\"#content\"));\r\n"],"sourceRoot":""}